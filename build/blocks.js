!function(){"use strict";var e=window.wp.element,t=window.wp.i18n;const{registerPaymentMethod:n}=wc.wcBlocksRegistry,{getSetting:a}=wc.wcSettings,m=a("vismapay_data",{}),l=({embed:t,description:n,paymentDescription:a})=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)("p",null,n),t&&a&&(0,e.createElement)("p",null,a)),r=()=>(0,e.createElement)("div",{className:"woocommerce-error"},(0,e.createElement)("strong",null,(0,t.__)("No payment methods available for the currency: ","visma-pay-payment-gateway")+m.currency)),c=({index:t,method:n,selected:a,onSelect:m})=>{const l=`${n.group}-${t}`,r=n.selected_value;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{onClick:()=>m(l,r),className:a===l?"selected bank-button":"bank-button"},(0,e.createElement)("img",{alt:n.name,src:n.img_src})))},s=({groupName:t,methods:n,selected:a,onSelect:m})=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)("p",null,t),n.map(((t,n)=>(0,e.createElement)(c,{key:n,index:n,method:t,selected:a,onSelect:m}))),(0,e.createElement)("div",{style:{display:"block",clear:"both"}})),o=({methods:n,selected:a,onSelect:m})=>{const l=[{key:"banks",groupName:(0,t.__)("Internet banking","visma-pay-payment-gateway")},{key:"creditcards",groupName:(0,t.__)("Payment card","visma-pay-payment-gateway")},{key:"wallets",groupName:(0,t.__)("Wallet services","visma-pay-payment-gateway")},{key:"creditinvoices",groupName:(0,t.__)("Invoice or part payment","visma-pay-payment-gateway")}];return(0,e.createElement)(e.Fragment,null,(0,e.createElement)("div",{id:"visma-pay-bank-payments"},l.map((t=>{let l=n.filter((e=>e.group===t.key));return 0!==l.length&&(0,e.createElement)(s,{key:t.key,groupName:t.groupName,methods:l,selected:a,onSelect:m})}))))},i=t=>{const{eventRegistration:n,emitResponse:a,components:c}=t,{onPaymentSetup:s,onCheckoutFail:i}=n,{responseTypes:p}=a,{LoadingMask:y}=c,[d,u]=(0,e.useState)(null),[g,E]=(0,e.useState)(!1),[v,h]=(0,e.useState)(!1);return(0,e.useEffect)((()=>{const e=s((async()=>(h(!0),{type:p.SUCCESS,meta:{paymentMethodData:{payment_method:"visma_pay",visma_pay_selected_bank:g}}})));return()=>{e()}}),[p.SUCCESS,s,g]),(0,e.useEffect)((()=>{const e=i((()=>(h(!1),!0)));return()=>{e()}}),[i]),(0,e.createElement)(y,{isLoading:v,showSpinner:!0},(0,e.createElement)(l,{embed:m.embed,description:m.description,paymentDescription:m.paymentDescription}),m.embed&&m.paymentMethods&&m.paymentMethods.length>0?(0,e.createElement)(o,{methods:m.paymentMethods,selected:d,onSelect:(e,t)=>{u(e),E(t)}}):(0,e.createElement)(r,null))};n({name:"visma_pay",label:(0,e.createElement)((t=>{const{PaymentMethodLabel:n}=t.components;return(0,e.createElement)(n,{text:m.title})}),null),ariaLabel:m.title,content:(0,e.createElement)(i,null),edit:(0,e.createElement)(i,null),canMakePayment:()=>!0,paymentMethodId:"visma_pay"})}();